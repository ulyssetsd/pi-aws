# Global Traefik Middleware for local network and VPN access restriction
# This middleware is shared across all internal apps to avoid duplication
# Reference it in Ingress annotations as: kube-system-local-network-only@kubernetescrd
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: local-network-only
  namespace: kube-system
spec:
  ipAllowList:
    sourceRange:
      - 192.168.1.0/24    # Local WiFi network
      - 10.8.0.0/24       # WireGuard VPN range
      - 10.42.0.0/16      # Kubernetes pod network
      - 10.43.0.0/16      # Kubernetes service network
