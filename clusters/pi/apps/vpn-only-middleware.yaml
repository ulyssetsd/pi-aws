# Traefik middleware to restrict access to VPN clients only
# Apply this middleware to any ingress that should be VPN-only
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: vpn-only
  namespace: default
spec:
  ipAllowList:
    sourceRange:
      # WireGuard VPN subnet
      - 10.8.0.0/24
      # Local network (optional - allows access from home network too)
      - 192.168.1.0/24
      # Kubernetes pod network (for internal communication)
      - 10.42.0.0/16
